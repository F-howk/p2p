$(function(){var o={userName:!1,email:!1,nickname:!1,inputPassword3:!1,inputPassword4:!1},e=null;$("#userName").on("input",function(){clearTimeout(e);var s=$(this).val().trim();if(""!=s)if(/^[\u2E80-\u9FFF\w-]{4,20}$/.test(s)){e=setTimeout(function(){$.get("http://127.0.0.1:3333/accrepeat.php",{username:s},function(s){"fail"==s?($("#userName").next().html("用户名已存在！").css({color:"red"}),$("#userName").css({border:"2px solid red"})):($("#userName").next().html(""),$("#userName").css({border:"2px solid green"}),o.userName=!0)})},1500)}else $(this).css({border:"2px solid red"});else $(this).css({border:"1px solid #ccc"}),$("#userName").next().html(""),o.userName=!1}),$("#email").on("input",function(){var s=$(this).val().trim();""!=s?/(?=.*[a-z])(?=.*\d)(?=.*[#@!~%^&*])[a-z\d#@!~%^&*]{8,16}/i.test(s)?($(this).css({border:"2px solid green"}),o.email=!0):$(this).css({border:"2px solid red"}):($(this).css({border:"1px solid #ccc"}),o.email=!1)}),$("#nickname").on("input",function(){var s=$(this).val().trim();""!=s?/^[\u2E80-\u9FFF\w-]{4,20}$/.test(s)?($("#nickname").css({border:"2px solid green"}),o.nickname=!0):$("#nickname").css({border:"2px solid red"}):($("#nickname").css({border:"1px solid #ccc"}),o.nickname=!1)}),$("#inputPassword3").on("input",function(){var s=$(this).val().trim();""!=s?/(?=.*[a-z])(?=.*\d)(?=.*[#@!~%^&*])[a-z\d#@!~%^&*]{8,16}/i.test(s)?($(this).css({border:"2px solid green"}),o.inputPassword3=!0):$(this).css({border:"2px solid red"}):($(this).css({border:"1px solid #ccc"}),o.inputPassword3=!1)}),$("#inputPassword4").on("input",function(){var s=$("#inputPassword3").val().trim(),e=$(this).val().trim();""!=e&&""!=s?e!=s?$(this).css({border:"2px solid red"}).next().html("两次输入密码不一样").css({color:"red"}):($(this).css({border:"2px solid green"}).next().html(""),o.inputPassword4=!0):($(this).css({border:"1px solid #ccc"}),o.inputPassword4=!1)}),$("button").on("click",function(){if(o.userName&&o.email&&o.nickname&&o.inputPassword3&&o.inputPassword4){$("input").css({border:"2px solid green"});var s=$("#userName").val().trim(),e=$("#email").val().trim(),r=$("#inputPassword4").val().trim(),i=$("#nickname").val().trim();$.post("http://127.0.0.1:3333/reg.php",{username:s,email:e,nickname:i,pwd:r},function(s){console.log(s),"ok"==s&&(alert("注册成功!"),location.href="/page/login.html")})}else for(var n in o)0==o[n]&&$("#"+n).css({border:"2px solid red"})}),$("button").on("blur",function(){o.userName&&o.email&&o.pwd&&o.nickname&&o.inputPassword3&&o.inputPassword4&&$("input").css({border:"2px solid green"}),o.userName&&$("#username").css({border:"2px solid green"}),o.email&&$("#email").css({border:"2px solid green"}),o.pwd&&$("#pwd").css({border:"2px solid green"}),o.nickname&&$("#nickname").css({border:"2px solid green"}),o.inputPassword3&&$("#inputPassword3").css({border:"2px solid green"}),o.inputPassword4?$("#inputPassword4").css({border:"2px solid green"}):$("input").css({border:"1px solid #ccc"})})});